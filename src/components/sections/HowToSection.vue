<template>
  <section class="howto" id="howto">
    <div class="container">
      <div class="howto__head">
        <div>
          <h2 class="howto__title">–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è?</h2>
          <p class="howto__subtitle">–ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ 4 —à–∞–≥–∞</p>
        </div>

        <a class="howto__cta" href="#tariffs">
          –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å <span aria-hidden="true">‚Üó</span>
        </a>
      </div>

      <div class="stepsBox">
        <div class="steps">
          <article
            v-for="(s, i) in steps"
            :key="i"
            class="step"
            :class="{
              'step--first': i === 0,
              'step--mid': i === 1 || i === 2,
              'step--last': i === 3
            }"
          >
            <div class="step__top" aria-hidden="true">
              <div class="step__line"></div>
              <div class="step__num">{{ s.step }}</div>
            </div>

            <h3 class="step__title">{{ s.title }}</h3>

            <p class="step__text">
              <template v-for="(chunk, ci) in s.text" :key="ci">
                <a
                  v-if="chunk.type === 'link'"
                  class="step__link"
                  :href="chunk.href"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  {{ chunk.value }}
                </a>
                <span v-else>{{ chunk.value }}</span>
              </template>
            </p>
          </article>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup lang="ts">
type TextChunk =
  | { type: "text"; value: string }
  | { type: "link"; value: string; href: string };

type Step = {
  step: string;
  title: string;
  text: TextChunk[];
};

const steps: Step[] = [
  {
    step: "1",
    title: "–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç",
    text: [
      { type: "text", value: "–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ " },
      { type: "link", value: "—Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏", href: "#" },
      { type: "text", value: " –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ—Å—å —Å —Ç–∞—Ä–∏—Ñ–æ–º." },
    ],
  },
  {
    step: "2",
    title: "–û–ø–ª–∞—Ç–∞ —Ç–∞—Ä–∏—Ñ–∞",
    text: [
      { type: "text", value: "–û–ø–ª–∞—Ç–∏—Ç–µ —Ç–∞—Ä–∏—Ñ –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º, –ª—é–±—ã–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –º–µ—Ç–æ–¥–æ–º, –µ—Å–ª–∏ —Å—Ä–µ–¥–∏ –Ω–∏—Ö –Ω–µ—Ç –Ω—É–∂–Ω–æ–≥–æ –≤–∞–º, " },
      { type: "link", value: "–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.", href: "#" },
    ],
  },
  {
    step: "3",
    title: "–°–∫–∞—á–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ",
    text: [
      { type: "text", value: "–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ " },
      { type: "link", value: "–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç", href: "#" },
      { type: "text", value: ", –ø–æ—Å–ª–µ —á–µ–≥–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤ –Ω–µ–º –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è." },
    ],
  },
  {
    step: "4",
    title: "üéâ –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä",
    text: [
      { type: "text", value: "–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –≤—ã–±—Ä–∞–≤ –Ω—É–∂–Ω—ã–π –≤–∞–º –º–µ—Ç–æ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –≤ –¥–≤–∞ –∫–ª–∏–∫–∞ –≤–∞—à —Ç—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω!" },
    ],
  },
];
</script>

<style scoped>
.howto {
  background: #0b0d12;
}

/* Head */
.howto__head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 18px;
}

.howto__title {
  margin: 0;
  font-family: var(--font-sf);
  font-weight: 500;
  font-size: 34px;
  line-height: 100%;
  color: #fff;
}

.howto__subtitle {
  margin: 10px 0 0;
  font-family: var(--font-sf);
  font-weight: 400;
  font-size: 16px;
  line-height: 100%;
  color: #ffffff99;
}

.howto__cta {
  height: 34px;
  padding: 0 14px;
  border-radius: 999px;
  background: #fff;
  color: #0b0d12;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-family: var(--font-sf);
  font-weight: 400;
  font-size: 13px;
  line-height: 100%;
  text-decoration: none;
  flex: 0 0 auto;
}

/* Container */
.stepsBox {
  margin-top: 22px;
  border: 1px solid #191920;
  border-radius: 24px;
  background: #0c0c0f;
  padding: 22px;
}

/* 4 columns */
.steps {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 24px;
}

.step {
  min-height: 160px;
}

/* top row (line + number) */
.step__top {
  position: relative;
  height: 24px;
}

.step__line {
  position: absolute;
  top: 50%;
  height: 1px;
  background: #191920;
  transform: translateY(-50%);
  left: 0;
  right: 0;
}

.step__num {
  position: absolute;
  top: 0;

  font-family: var(--font-sf);
  font-weight: 500;
  font-size: 24px;
  line-height: 100%;
  color: #ffffff99;

  background: #0c0c0f;
  padding: 0 10px;
  border-radius: 999px;
}

/* ===== Desktop alignment logic ===== */

/* STEP 1: left */
.step--first .step__num {
  left: 0;
}
.step--first .step__line {
  left: 56px;
  right: 0;
}
.step--first .step__title,
.step--first .step__text {
  text-align: left;
}

/* STEP 2-3: center */
.step--mid .step__num {
  left: 50%;
  transform: translateX(-50%);
}
.step--mid .step__line {
  left: 0;
  right: 0;
}
.step--mid .step__title,
.step--mid .step__text {
  text-align: center;
}

/* STEP 4: right */
.step--last .step__num {
  right: 0;
}
.step--last .step__line {
  left: 0;
  right: 56px;
}
.step--last .step__title,
.step--last .step__text {
  text-align: right;
}

/* Typography */
.step__title {
  margin: 18px 0 0;
  font-family: var(--font-sf);
  font-weight: 500;
  font-size: 24px;
  line-height: 100%;
  color: #fff;
}

.step__text {
  margin: 14px 0 0;
  font-family: var(--font-sf);
  font-weight: 400;
  font-size: 14px;
  line-height: 100%;
  color: #ffffff99;
}

.step__link {
  color: #4c67ff;
  text-decoration: none;
}
.step__link:hover {
  text-decoration: underline;
}

/* ===== Tablet (2 columns) ===== */
@media (max-width: 980px) {
  .steps {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  /* –ù–∞ –ø–ª–∞–Ω—à–µ—Ç–µ: –¥–µ–ª–∞–µ–º –≤—Å—ë —Å–ª–µ–≤–∞ (–∫–∞–∫ —É —Ç–µ–±—è –±—ã–ª–æ) */
  .step .step__title,
  .step .step__text {
    text-align: left;
  }

  .step__line {
    left: 56px;
    right: 0;
  }
  .step__num {
    left: 0;
    right: auto;
    transform: none;
  }
}

/* ===== Mobile (1 column) ===== */
@media (max-width: 520px) {
  .howto__head {
    flex-direction: column;
    align-items: flex-start;
  }

  .howto__cta {display: none;}

  .steps {
    grid-template-columns: 1fr;
  }

  /* –í–ê–ñ–ù–û: –Ω–∞ –º–æ–±–∏–ª–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ª–æ–≥–∏–∫—É 1/2-3/4
     (–ø–µ—Ä–µ—Ç–∏—Ä–∞–µ–º –ø–ª–∞–Ω—à–µ—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤—ã—à–µ) */

  /* 1 ‚Äî —Å–ª–µ–≤–∞ */
  .step--first .step__title,
  .step--first .step__text {
    text-align: left;
  }
  .step--first .step__num {
    left: 0;
    right: auto;
    transform: none;
  }
  .step--first .step__line {
    left: 56px;
    right: 0;
  }

  /* 2 –∏ 3 ‚Äî —Ü–µ–Ω—Ç—Ä */
  .step--mid .step__title,
  .step--mid .step__text {
    text-align: center;
  }
  .step--mid .step__num {
    left: 50%;
    right: auto;
    transform: translateX(-50%);
  }
  .step--mid .step__line {
    left: 0;
    right: 0;
  }

  /* 4 ‚Äî —Å–ø—Ä–∞–≤–∞ */
  .step--last .step__title,
  .step--last .step__text {
    text-align: right;
  }
  .step--last .step__num {
    left: auto;
    right: 0;
    transform: none;
  }

  /* ‚úÖ –ª–∏–Ω–∏—è —Å–ø—Ä–∞–≤–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –í–ò–î–ò–ú–ê: –¥–µ–ª–∞–µ–º –µ—ë –Ω–∞ –ø—Ä–∞–≤–æ–π —Å—Ç–æ—Ä–æ–Ω–µ */
  .step--last .step__line {
    left: 0;
    right: 0; /* –ª–∏–Ω–∏—è –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
  }

  /* ‚úÖ –Ω–æ —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ ‚Äú–∞–∫—Ü–µ–Ω—Ç —Å–ø—Ä–∞–≤–∞‚Äù, –¥–æ–±–∞–≤–∏–º –ø—Ä–∞–≤—É—é –≤–µ—Ä—Ç–∏–∫–∞–ª—å */
  .step--last {
    padding-right: 14px; /* –º–µ—Å—Ç–æ –ø–æ–¥ –ª–∏–Ω–∏—é */
  }
  .step--last::after {
    content: "";
    position: absolute;
    top: 10px;
    right: 0;
    bottom: 10px;
    width: 2px;
    background: rgba(255, 255, 255, 0.25);
    border-radius: 999px;
  }
}
</style>